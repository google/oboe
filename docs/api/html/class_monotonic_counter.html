<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Oboe: MonotonicCounter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Oboe
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Audio library for Android</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_monotonic_counter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MonotonicCounter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_monotonic_counter_8h_source.html">MonotonicCounter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1409121c9fe027f70fbd70d9b3b2762c"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_monotonic_counter.html#a1409121c9fe027f70fbd70d9b3b2762c">get</a> () const</td></tr>
<tr class="separator:a1409121c9fe027f70fbd70d9b3b2762c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57ebe4605021533cddaa3eefb8a4429f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_monotonic_counter.html#a57ebe4605021533cddaa3eefb8a4429f">set</a> (int64_t counter)</td></tr>
<tr class="separator:a57ebe4605021533cddaa3eefb8a4429f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7724c344757d4df4a3488be1eb352d4c"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_monotonic_counter.html#a7724c344757d4df4a3488be1eb352d4c">increment</a> (int64_t delta)</td></tr>
<tr class="separator:a7724c344757d4df4a3488be1eb352d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a252a12a6d37dfd0a187dac14a4fc198d"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_monotonic_counter.html#a252a12a6d37dfd0a187dac14a4fc198d">update32</a> (int32_t counter32)</td></tr>
<tr class="separator:a252a12a6d37dfd0a187dac14a4fc198d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a601883c9a286dfaae766cb00e61b4636"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_monotonic_counter.html#a601883c9a286dfaae766cb00e61b4636">reset32</a> ()</td></tr>
<tr class="separator:a601883c9a286dfaae766cb00e61b4636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af326a81c4e224aa6cb80d9818db2a94a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_monotonic_counter.html#af326a81c4e224aa6cb80d9818db2a94a">roundUp64</a> (int32_t period)</td></tr>
<tr class="separator:af326a81c4e224aa6cb80d9818db2a94a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Maintain a 64-bit monotonic counter. Can be used to track a 32-bit counter that wraps or gets reset.</p>
<p>Note that this is not atomic and has no interior locks. A caller will need to provide their own exterior locking if they need to use it from multiple threads. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a1409121c9fe027f70fbd70d9b3b2762c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1409121c9fe027f70fbd70d9b3b2762c">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t MonotonicCounter::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>current value of the counter </dd></dl>

</div>
</div>
<a id="a7724c344757d4df4a3488be1eb352d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7724c344757d4df4a3488be1eb352d4c">&#9670;&nbsp;</a></span>increment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t MonotonicCounter::increment </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advance the counter if delta is positive. </p><dl class="section return"><dt>Returns</dt><dd>current value of the counter </dd></dl>

</div>
</div>
<a id="a601883c9a286dfaae766cb00e61b4636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a601883c9a286dfaae766cb00e61b4636">&#9670;&nbsp;</a></span>reset32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MonotonicCounter::reset32 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reset the stored value of the 32-bit counter. This is used if your counter32 has been reset to zero. </p>

</div>
</div>
<a id="af326a81c4e224aa6cb80d9818db2a94a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af326a81c4e224aa6cb80d9818db2a94a">&#9670;&nbsp;</a></span>roundUp64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MonotonicCounter::roundUp64 </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>period</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Round 64-bit counter up to a multiple of the period.</p>
<p>The period must be positive.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">period</td><td>might be, for example, a buffer capacity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a57ebe4605021533cddaa3eefb8a4429f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57ebe4605021533cddaa3eefb8a4429f">&#9670;&nbsp;</a></span>set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MonotonicCounter::set </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>counter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>set the current value of the counter </p>

</div>
</div>
<a id="a252a12a6d37dfd0a187dac14a4fc198d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a252a12a6d37dfd0a187dac14a4fc198d">&#9670;&nbsp;</a></span>update32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t MonotonicCounter::update32 </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>counter32</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advance the 64-bit counter if (current32 - previousCurrent32) &gt; 0. This can be used to convert a 32-bit counter that may be wrapping into a monotonic 64-bit counter.</p>
<p>This counter32 should NOT be allowed to advance by more than 0x7FFFFFFF between calls. Think of the wrapping counter like a sine wave. If the frequency of the signal is more than half the sampling rate (Nyquist rate) then you cannot measure it properly. If the counter wraps around every 24 hours then we should measure it with a period of less than 12 hours.</p>
<dl class="section return"><dt>Returns</dt><dd>current value of the 64-bit counter </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/common/<a class="el" href="_monotonic_counter_8h_source.html">MonotonicCounter.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
